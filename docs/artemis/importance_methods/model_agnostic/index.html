<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>artemis.importance_methods.model_agnostic API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>artemis.importance_methods.model_agnostic</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from artemis.importance_methods.model_agnostic._pdp import PartialDependenceBasedImportance
from artemis.importance_methods.model_agnostic._permutational_importance import PermutationImportance

__all__ = [&#34;PermutationImportance&#34;, &#34;PartialDependenceBasedImportance&#34;]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance"><code class="flex name class">
<span>class <span class="ident">PartialDependenceBasedImportance</span></span>
</code></dt>
<dd>
<div class="desc"><p>Partial Dependence Based Feature Importance.
It is used for calculating feature importance for partial dependence based feature interaction methods:
Friedman's H-statistic and Greenwell methods.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>method</code></strong> :&ensp;<code>str </code></dt>
<dd>Method name.</dd>
<dt><strong><code>feature_importance</code></strong> :&ensp;<code>pd.DataFrame </code></dt>
<dd>Feature importance values.</dd>
<dt><strong><code>features_included</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>List of features for which importance is calculated.</dd>
<dt><strong><code>X_sampled</code></strong> :&ensp;<code>pd.DataFrame</code></dt>
<dd>Sampled data used for calculation.</dd>
<dt><strong><code>pd_calculator</code></strong> :&ensp;<code>PartialDependenceCalculator</code></dt>
<dd>Object used to calculate and store partial dependence values.</dd>
</dl>
<h2 id="references">References</h2>
<ul>
<li><a href="https://arxiv.org/abs/1805.04755">https://arxiv.org/abs/1805.04755</a></li>
</ul>
<p>Constructor for PartialDependenceBasedImportance</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class PartialDependenceBasedImportance(FeatureImportanceMethod):
    &#34;&#34;&#34;
    Partial Dependence Based Feature Importance.
    It is used for calculating feature importance for partial dependence based feature interaction methods:
    Friedman&#39;s H-statistic and Greenwell methods.


    Attributes
    ----------
    method : str 
        Method name.
    feature_importance : pd.DataFrame 
        Feature importance values.
    features_included : List[str]
        List of features for which importance is calculated.
    X_sampled: pd.DataFrame
        Sampled data used for calculation.
    pd_calculator : PartialDependenceCalculator
        Object used to calculate and store partial dependence values.

    References
    ----------
    - https://arxiv.org/abs/1805.04755
    &#34;&#34;&#34;

    def __init__(self):
        &#34;&#34;&#34;Constructor for PartialDependenceBasedImportance&#34;&#34;&#34;
        super().__init__(ImportanceMethod.PDP_BASED_IMPORTANCE)

    def importance(
        self,
        model,
        X: pd.DataFrame,
        n: int = None,
        predict_function: Optional[Callable] = None,
        features: Optional[List[str]] = None,
        show_progress: bool = False,
        batchsize: int = 2000,
        pd_calculator: Optional[PartialDependenceCalculator] = None,
    ):
        &#34;&#34;&#34;Calculates Partial Dependence Based Feature Importance.
        
        Parameters
        ----------
        model : object
             Model for which importance will be calculated, should have predict_proba or predict method, or predict_function should be provided. 
        X : pd.DataFrame
             Data used to calculate importance. If n is not None, n rows from X will be sampled. 
        n : int, optional
            Number of samples to be used for calculation of importance. If None, all rows from X will be used. Default is None.
        predict_function : Callable, optional
            Function used to predict model output. It should take model and dataset and outputs predictions. 
            If None, `predict_proba` method will be used if it exists, otherwise `predict` method. Default is None.
        features : List[str], optional
            List of features for which importance will be calculated. If None, all features from X will be used. Default is None.
        show_progress : bool
            If True, progress bar will be shown. Default is False.
        batchsize : int
            Batch size for calculating partial dependence. Data for prediction are collected until the number of rows exceeds batchsize. 
            Then, the `predict_function` is called, jointly for the entire batch of observations. It speeds up the operation of the method
            by reducing the number of `predict_function` calls.
            Default is 2000.
        pd_calculator : PartialDependenceCalculator, optional
            PartialDependenceCalculator object containing partial dependence values for a given model and dataset. 
            Providing this object speeds up the calculation as partial dependence values do not need to be recalculated.
            If None, it will be created from scratch. Default is None.

        Returns
        -------
        pd.DataFrame
            Result dataframe containing feature importance with columns: &#34;Feature&#34;, &#34;Importance&#34;
        &#34;&#34;&#34;
        self.predict_function = get_predict_function(model, predict_function)
        self.X_sampled = sample_if_not_none(self._random_generator, X, n)
        self.features_included = all_if_none(X.columns, features)
  

        if pd_calculator is None:
            self.pd_calculator = PartialDependenceCalculator(model, self.X_sampled, self.predict_function, batchsize)
        else: 
            if pd_calculator.model != model:
                raise ValueError(&#34;Model in PDP calculator is different than the model in the method.&#34;)
            if not pd_calculator.X.equals(self.X_sampled):
                raise ValueError(&#34;Data in PDP calculator is different than the data in the method.&#34;)
            self.pd_calculator = pd_calculator

        self.feature_importance = self._pdp_importance(show_progress)
        return self.feature_importance

    @property
    def importance_ascending_order(self):
        return False

    def _pdp_importance(self, show_progress: bool) -&gt; pd.DataFrame:
        self.pd_calculator.calculate_pd_single(show_progress=show_progress)

        importance = []
        num_features, _ = split_features_num_cat(self.X_sampled, self.features_included)

        for feature in self.features_included:
            pdp = self.pd_calculator.get_pd_single(feature)
            importance.append(_calc_importance(feature, pdp, feature in num_features))

        return pd.DataFrame(importance, columns=[&#34;Feature&#34;, &#34;Importance&#34;]).sort_values(
            by=&#34;Importance&#34;, ascending=self.importance_ascending_order, ignore_index=True
        ).fillna(0)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>artemis.importance_methods._method.FeatureImportanceMethod</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance.importance_ascending_order"><code class="name">var <span class="ident">importance_ascending_order</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def importance_ascending_order(self):
    return False</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance.importance"><code class="name flex">
<span>def <span class="ident">importance</span></span>(<span>self, model, X: pandas.core.frame.DataFrame, n: int = None, predict_function: Optional[Callable] = None, features: Optional[List[str]] = None, show_progress: bool = False, batchsize: int = 2000, pd_calculator: Optional[artemis._utilities.pd_calculator.PartialDependenceCalculator] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Calculates Partial Dependence Based Feature Importance.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>model</code></strong> :&ensp;<code>object</code></dt>
<dd>Model for which importance will be calculated, should have predict_proba or predict method, or predict_function should be provided.</dd>
<dt><strong><code>X</code></strong> :&ensp;<code>pd.DataFrame</code></dt>
<dd>Data used to calculate importance. If n is not None, n rows from X will be sampled.</dd>
<dt><strong><code>n</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of samples to be used for calculation of importance. If None, all rows from X will be used. Default is None.</dd>
<dt><strong><code>predict_function</code></strong> :&ensp;<code>Callable</code>, optional</dt>
<dd>Function used to predict model output. It should take model and dataset and outputs predictions.
If None, <code>predict_proba</code> method will be used if it exists, otherwise <code>predict</code> method. Default is None.</dd>
<dt><strong><code>features</code></strong> :&ensp;<code>List[str]</code>, optional</dt>
<dd>List of features for which importance will be calculated. If None, all features from X will be used. Default is None.</dd>
<dt><strong><code>show_progress</code></strong> :&ensp;<code>bool</code></dt>
<dd>If True, progress bar will be shown. Default is False.</dd>
<dt><strong><code>batchsize</code></strong> :&ensp;<code>int</code></dt>
<dd>Batch size for calculating partial dependence. Data for prediction are collected until the number of rows exceeds batchsize.
Then, the <code>predict_function</code> is called, jointly for the entire batch of observations. It speeds up the operation of the method
by reducing the number of <code>predict_function</code> calls.
Default is 2000.</dd>
<dt><strong><code>pd_calculator</code></strong> :&ensp;<code>PartialDependenceCalculator</code>, optional</dt>
<dd>PartialDependenceCalculator object containing partial dependence values for a given model and dataset.
Providing this object speeds up the calculation as partial dependence values do not need to be recalculated.
If None, it will be created from scratch. Default is None.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>pd.DataFrame</code></dt>
<dd>Result dataframe containing feature importance with columns: "Feature", "Importance"</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def importance(
    self,
    model,
    X: pd.DataFrame,
    n: int = None,
    predict_function: Optional[Callable] = None,
    features: Optional[List[str]] = None,
    show_progress: bool = False,
    batchsize: int = 2000,
    pd_calculator: Optional[PartialDependenceCalculator] = None,
):
    &#34;&#34;&#34;Calculates Partial Dependence Based Feature Importance.
    
    Parameters
    ----------
    model : object
         Model for which importance will be calculated, should have predict_proba or predict method, or predict_function should be provided. 
    X : pd.DataFrame
         Data used to calculate importance. If n is not None, n rows from X will be sampled. 
    n : int, optional
        Number of samples to be used for calculation of importance. If None, all rows from X will be used. Default is None.
    predict_function : Callable, optional
        Function used to predict model output. It should take model and dataset and outputs predictions. 
        If None, `predict_proba` method will be used if it exists, otherwise `predict` method. Default is None.
    features : List[str], optional
        List of features for which importance will be calculated. If None, all features from X will be used. Default is None.
    show_progress : bool
        If True, progress bar will be shown. Default is False.
    batchsize : int
        Batch size for calculating partial dependence. Data for prediction are collected until the number of rows exceeds batchsize. 
        Then, the `predict_function` is called, jointly for the entire batch of observations. It speeds up the operation of the method
        by reducing the number of `predict_function` calls.
        Default is 2000.
    pd_calculator : PartialDependenceCalculator, optional
        PartialDependenceCalculator object containing partial dependence values for a given model and dataset. 
        Providing this object speeds up the calculation as partial dependence values do not need to be recalculated.
        If None, it will be created from scratch. Default is None.

    Returns
    -------
    pd.DataFrame
        Result dataframe containing feature importance with columns: &#34;Feature&#34;, &#34;Importance&#34;
    &#34;&#34;&#34;
    self.predict_function = get_predict_function(model, predict_function)
    self.X_sampled = sample_if_not_none(self._random_generator, X, n)
    self.features_included = all_if_none(X.columns, features)


    if pd_calculator is None:
        self.pd_calculator = PartialDependenceCalculator(model, self.X_sampled, self.predict_function, batchsize)
    else: 
        if pd_calculator.model != model:
            raise ValueError(&#34;Model in PDP calculator is different than the model in the method.&#34;)
        if not pd_calculator.X.equals(self.X_sampled):
            raise ValueError(&#34;Data in PDP calculator is different than the data in the method.&#34;)
        self.pd_calculator = pd_calculator

    self.feature_importance = self._pdp_importance(show_progress)
    return self.feature_importance</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="artemis.importance_methods.model_agnostic.PermutationImportance"><code class="flex name class">
<span>class <span class="ident">PermutationImportance</span></span>
<span>(</span><span>metric: artemis._utilities.performance_metrics.Metric = &lt;artemis._utilities.performance_metrics.RMSE object&gt;, random_state: Optional[int] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Permutation-Based Feature Importance.
It is used for calculating feature importance for performance based feature interaction - Sejong Oh method.</p>
<p>Importance of a feature is defined by the metric selected by user (default is sum of gains).</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>method</code></strong> :&ensp;<code>str </code></dt>
<dd>Method name.</dd>
<dt><strong><code>metric</code></strong> :&ensp;<code>Metric</code></dt>
<dd>Metric used for calculating performance.</dd>
<dt><strong><code>feature_importance</code></strong> :&ensp;<code>pd.DataFrame </code></dt>
<dd>Feature importance values.</dd>
</dl>
<h2 id="references">References</h2>
<ul>
<li><a href="https://jmlr.org/papers/v20/18-760.html">https://jmlr.org/papers/v20/18-760.html</a></li>
</ul>
<p>Constructor for PermutationImportance.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>metric</code></strong> :&ensp;<code>Metric</code></dt>
<dd>Metric used to calculate model performance. Defaults to RMSE().</dd>
<dt><strong><code>random_state</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Random state for reproducibility. Defaults to None.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class PermutationImportance(FeatureImportanceMethod):
    &#34;&#34;&#34;
    Permutation-Based Feature Importance.
    It is used for calculating feature importance for performance based feature interaction - Sejong Oh method.

    Importance of a feature is defined by the metric selected by user (default is sum of gains).

    Attributes
    ----------
    method : str 
        Method name.
    metric: Metric
        Metric used for calculating performance.
    feature_importance : pd.DataFrame 
        Feature importance values.
        
    References
    ----------
    - https://jmlr.org/papers/v20/18-760.html
    &#34;&#34;&#34;

    def __init__(self, metric: Metric = RMSE(), random_state: Optional[int] = None):
        &#34;&#34;&#34;Constructor for PermutationImportance.

        Parameters
        ----------
        metric : Metric
            Metric used to calculate model performance. Defaults to RMSE().
        random_state : int, optional 
            Random state for reproducibility. Defaults to None.
        &#34;&#34;&#34;
        super().__init__(ImportanceMethod.PERMUTATION_IMPORTANCE, random_state=random_state)
        self.metric = metric

    def importance(
        self,
        model,
        X: pd.DataFrame,
        y_true: np.array,
        n_repeat: int = 15,
        features: Optional[List[str]] = None,
        show_progress: bool = False,
    ):
        &#34;&#34;&#34;Calculates Permutation Based Feature Importance.

        Parameters
        ----------
        model : object
               Model for which importance will be calculated, should have predict method.
        X : pd.DataFrame
            Data used to calculate importance. 
        y_true : np.array or pd.Series
            Target values for X data. 
        n_repeat : int, optional
            Number of permutations. Default is 10.
        features : List[str], optional
            List of features for which importance will be calculated. If None, all features from X will be used. Default is None.
        show_progress : bool
            If True, progress bar will be shown. Default is False.

        Returns
        -------
        pd.DataFrame
            Result dataframe containing feature importance with columns: &#34;Feature&#34;, &#34;Importance&#34;
        &#34;&#34;&#34;
        self.feature_importance = _permutation_importance(
            model, X, y_true, self.metric, n_repeat, features, show_progress, self._random_generator
        )
        return self.feature_importance
    @property
    def importance_ascending_order(self):
        return False</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>artemis.importance_methods._method.FeatureImportanceMethod</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="artemis.importance_methods.model_agnostic.PermutationImportance.importance_ascending_order"><code class="name">var <span class="ident">importance_ascending_order</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def importance_ascending_order(self):
    return False</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="artemis.importance_methods.model_agnostic.PermutationImportance.importance"><code class="name flex">
<span>def <span class="ident">importance</span></span>(<span>self, model, X: pandas.core.frame.DataFrame, y_true: <built-in function array>, n_repeat: int = 15, features: Optional[List[str]] = None, show_progress: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Calculates Permutation Based Feature Importance.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>model</code></strong> :&ensp;<code>object</code></dt>
<dd>Model for which importance will be calculated, should have predict method.</dd>
<dt><strong><code>X</code></strong> :&ensp;<code>pd.DataFrame</code></dt>
<dd>Data used to calculate importance.</dd>
<dt><strong><code>y_true</code></strong> :&ensp;<code>np.array</code> or <code>pd.Series</code></dt>
<dd>Target values for X data.</dd>
<dt><strong><code>n_repeat</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of permutations. Default is 10.</dd>
<dt><strong><code>features</code></strong> :&ensp;<code>List[str]</code>, optional</dt>
<dd>List of features for which importance will be calculated. If None, all features from X will be used. Default is None.</dd>
<dt><strong><code>show_progress</code></strong> :&ensp;<code>bool</code></dt>
<dd>If True, progress bar will be shown. Default is False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>pd.DataFrame</code></dt>
<dd>Result dataframe containing feature importance with columns: "Feature", "Importance"</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def importance(
    self,
    model,
    X: pd.DataFrame,
    y_true: np.array,
    n_repeat: int = 15,
    features: Optional[List[str]] = None,
    show_progress: bool = False,
):
    &#34;&#34;&#34;Calculates Permutation Based Feature Importance.

    Parameters
    ----------
    model : object
           Model for which importance will be calculated, should have predict method.
    X : pd.DataFrame
        Data used to calculate importance. 
    y_true : np.array or pd.Series
        Target values for X data. 
    n_repeat : int, optional
        Number of permutations. Default is 10.
    features : List[str], optional
        List of features for which importance will be calculated. If None, all features from X will be used. Default is None.
    show_progress : bool
        If True, progress bar will be shown. Default is False.

    Returns
    -------
    pd.DataFrame
        Result dataframe containing feature importance with columns: &#34;Feature&#34;, &#34;Importance&#34;
    &#34;&#34;&#34;
    self.feature_importance = _permutation_importance(
        model, X, y_true, self.metric, n_repeat, features, show_progress, self._random_generator
    )
    return self.feature_importance</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="artemis.importance_methods" href="../index.html">artemis.importance_methods</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance" href="#artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance">PartialDependenceBasedImportance</a></code></h4>
<ul class="">
<li><code><a title="artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance.importance" href="#artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance.importance">importance</a></code></li>
<li><code><a title="artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance.importance_ascending_order" href="#artemis.importance_methods.model_agnostic.PartialDependenceBasedImportance.importance_ascending_order">importance_ascending_order</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="artemis.importance_methods.model_agnostic.PermutationImportance" href="#artemis.importance_methods.model_agnostic.PermutationImportance">PermutationImportance</a></code></h4>
<ul class="">
<li><code><a title="artemis.importance_methods.model_agnostic.PermutationImportance.importance" href="#artemis.importance_methods.model_agnostic.PermutationImportance.importance">importance</a></code></li>
<li><code><a title="artemis.importance_methods.model_agnostic.PermutationImportance.importance_ascending_order" href="#artemis.importance_methods.model_agnostic.PermutationImportance.importance_ascending_order">importance_ascending_order</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>